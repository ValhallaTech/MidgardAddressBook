/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/pdfmake@0.1.68/src/qrEnc.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";for(var VERSIONS=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]],MODE_TERMINATOR=0,MODE_NUMERIC=1,MODE_ALPHANUMERIC=2,MODE_OCTET=4,MODE_KANJI=8,NUMERIC_REGEXP=/^\d*$/,ALPHANUMERIC_REGEXP=/^[A-Za-z0-9 $%*+\-./:]*$/,ALPHANUMERIC_OUT_REGEXP=/^[A-Z0-9 $%*+\-./:]*$/,ECCLEVEL_L=1,ECCLEVEL_M=0,ECCLEVEL_Q=3,ECCLEVEL_H=2,GF256_MAP=[],GF256_INVMAP=[-1],i=0,v=1;i<255;++i)GF256_MAP.push(v),GF256_INVMAP[v]=i,v=2*v^(v>=128?285:0);var GF256_GENPOLY=[[]];for(i=0;i<30;++i){for(var prevpoly=GF256_GENPOLY[i],poly=[],j=0;j<=i;++j){var a=j<i?GF256_MAP[prevpoly[j]]:0,b=GF256_MAP[(i+(prevpoly[j-1]||0))%255];poly.push(GF256_INVMAP[a^b])}GF256_GENPOLY.push(poly)}var ALPHANUMERIC_MAP={};for(i=0;i<45;++i)ALPHANUMERIC_MAP["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(i)]=i;var MASKFUNCS=[function(r,t){return(r+t)%2==0},function(r,t){return r%2==0},function(r,t){return t%3==0},function(r,t){return(r+t)%3==0},function(r,t){return((r/2|0)+(t/3|0))%2==0},function(r,t){return r*t%2+r*t%3==0},function(r,t){return(r*t%2+r*t%3)%2==0},function(r,t){return((r+t)%2+r*t%3)%2==0}],needsverinfo=function(r){return r>6},getsizebyver=function(r){return 4*r+17},nfullbits=function(r){var t=VERSIONS[r],e=16*r*r+128*r+64;return needsverinfo(r)&&(e-=36),t[2].length&&(e-=25*t[2].length*t[2].length-10*t[2].length-55),e},ndatabits=function(r,t){var e=-8&nfullbits(r),a=VERSIONS[r];return e-=8*a[0][t]*a[1][t]},ndatalenbits=function(r,t){switch(t){case MODE_NUMERIC:return r<10?10:r<27?12:14;case MODE_ALPHANUMERIC:return r<10?9:r<27?11:13;case MODE_OCTET:return r<10?8:16;case MODE_KANJI:return r<10?8:r<27?10:12}},getmaxdatalen=function(r,t,e){var a=ndatabits(r,e)-4-ndatalenbits(r,t);switch(t){case MODE_NUMERIC:return 3*(a/10|0)+(a%10<4?0:a%10<7?1:2);case MODE_ALPHANUMERIC:return 2*(a/11|0)+(a%11<6?0:1);case MODE_OCTET:return a/8|0;case MODE_KANJI:return a/13|0}},validatedata=function(r,t){switch(r){case MODE_NUMERIC:return t.match(NUMERIC_REGEXP)?t:null;case MODE_ALPHANUMERIC:return t.match(ALPHANUMERIC_REGEXP)?t.toUpperCase():null;case MODE_OCTET:if("string"==typeof t){for(var e=[],a=0;a<t.length;++a){var n=t.charCodeAt(a);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<65536?e.push(224|n>>12,128|n>>6&63,128|63&n):e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)}return e}return t}},encode=function(r,t,e,a){var n=[],u=0,o=8,i=e.length,f=function(r,t){if(t>=o){for(n.push(u|r>>(t-=o));t>=8;)n.push(r>>(t-=8)&255);u=0,o=8}t>0&&(u|=(r&(1<<t)-1)<<(o-=t))},E=ndatalenbits(r,t);switch(f(t,4),f(i,E),t){case MODE_NUMERIC:for(var s=2;s<i;s+=3)f(parseInt(e.substring(s-2,s+1),10),10);f(parseInt(e.substring(s-2),10),[0,4,7][i%3]);break;case MODE_ALPHANUMERIC:for(s=1;s<i;s+=2)f(45*ALPHANUMERIC_MAP[e.charAt(s-1)]+ALPHANUMERIC_MAP[e.charAt(s)],11);i%2==1&&f(ALPHANUMERIC_MAP[e.charAt(s-1)],6);break;case MODE_OCTET:for(s=0;s<i;++s)f(e[s],8)}for(f(MODE_TERMINATOR,4),o<8&&n.push(u);n.length+1<a;)n.push(236,17);return n.length<a&&n.push(236),n},calculateecc=function(r,t){for(var e=r.slice(0),a=r.length,n=t.length,u=0;u<n;++u)e.push(0);for(u=0;u<a;){var o=GF256_INVMAP[e[u++]];if(o>=0)for(var i=0;i<n;++i)e[u+i]^=GF256_MAP[(o+t[i])%255]}return e.slice(a)},augumenteccs=function(r,t,e){for(var a=[],n=r.length/t|0,u=0,o=t-r.length%t,i=0;i<o;++i)a.push(u),u+=n;for(i=o;i<t;++i)a.push(u),u+=n+1;a.push(u);var f=[];for(i=0;i<t;++i)f.push(calculateecc(r.slice(a[i],a[i+1]),e));var E=[],s=r.length/t|0;for(i=0;i<s;++i)for(var c=0;c<t;++c)E.push(r[a[c]+i]);for(c=o;c<t;++c)E.push(r[a[c+1]-1]);for(i=0;i<e.length;++i)for(c=0;c<t;++c)E.push(f[c][i]);return E},augumentbch=function(r,t,e,a){for(var n=r<<a,u=t-1;u>=0;--u)n>>a+u&1&&(n^=e<<u);return r<<a|n},makebasematrix=function(r){for(var t=VERSIONS[r],e=getsizebyver(r),a=[],n=[],u=0;u<e;++u)a.push([]),n.push([]);var o=function(r,t,e,u,o){for(var i=0;i<e;++i)for(var f=0;f<u;++f)a[r+i][t+f]=o[i]>>f&1,n[r+i][t+f]=1};o(0,0,9,9,[127,65,93,93,93,65,383,0,64]),o(e-8,0,8,9,[256,127,65,93,93,93,65,127]),o(0,e-8,9,8,[254,130,186,186,186,130,254,0,0]);for(u=9;u<e-8;++u)a[6][u]=a[u][6]=1&~u,n[6][u]=n[u][6]=1;var i=t[2],f=i.length;for(u=0;u<f;++u)for(var E=0===u?f-1:f,s=0===u||u===f-1?1:0;s<E;++s)o(i[u],i[s],5,5,[31,17,21,17,31]);if(needsverinfo(r)){var c=augumentbch(r,6,7973,12),h=0;for(u=0;u<6;++u)for(s=0;s<3;++s)a[u][e-11+s]=a[e-11+s][u]=c>>h++&1,n[u][e-11+s]=n[e-11+s][u]=1}return{matrix:a,reserved:n}},putdata=function(r,t,e){for(var a=r.length,n=0,u=-1,o=a-1;o>=0;o-=2){6==o&&--o;for(var i=u<0?a-1:0,f=0;f<a;++f){for(var E=o;E>o-2;--E)t[i][E]||(r[i][E]=e[n>>3]>>(7&~n)&1,++n);i+=u}u=-u}return r},maskdata=function(r,t,e){for(var a=MASKFUNCS[e],n=r.length,u=0;u<n;++u)for(var o=0;o<n;++o)t[u][o]||(r[u][o]^=a(u,o));return r},putformatinfo=function(r,t,e,a){for(var n=r.length,u=21522^augumentbch(e<<3|a,5,1335,10),o=0;o<15;++o){var i=[n-1,n-2,n-3,n-4,n-5,n-6,n-7,n-8,7,5,4,3,2,1,0][o];r[[0,1,2,3,4,5,7,8,n-7,n-6,n-5,n-4,n-3,n-2,n-1][o]][8]=r[8][i]=u>>o&1}return r},evaluatematrix=function(r){for(var t=function(r){for(var t=0,e=0;e<r.length;++e)r[e]>=5&&(t+=r[e]-5+3);for(e=5;e<r.length;e+=2){var a=r[e];r[e-1]==a&&r[e-2]==3*a&&r[e-3]==a&&r[e-4]==a&&(r[e-5]>=4*a||r[e+1]>=4*a)&&(t+=40)}return t},e=r.length,a=0,n=0,u=0;u<e;++u){var o,i=r[u];o=[0];for(var f=0;f<e;){for(E=0;f<e&&i[f];++E)++f;for(o.push(E),E=0;f<e&&!i[f];++E)++f;o.push(E)}a+=t(o),o=[0];for(f=0;f<e;){var E;for(E=0;f<e&&r[f][u];++E)++f;for(o.push(E),E=0;f<e&&!r[f][u];++E)++f;o.push(E)}a+=t(o);var s=r[u+1]||[];n+=i[0];for(f=1;f<e;++f){var c=i[f];n+=c,i[f-1]==c&&s[f]===c&&s[f-1]===c&&(a+=3)}}return a+=10*(Math.abs(n/e/e-.5)/.05|0)},generate=function(r,t,e,a,n){var u=VERSIONS[t],o=encode(t,e,r,ndatabits(t,a)>>3);o=augumenteccs(o,u[1][a],GF256_GENPOLY[u[0][a]]);var i=makebasematrix(t),f=i.matrix,E=i.reserved;if(putdata(f,E,o),n<0){maskdata(f,E,0),putformatinfo(f,E,a,0);var s=0,c=evaluatematrix(f);for(maskdata(f,E,0),n=1;n<8;++n){maskdata(f,E,n),putformatinfo(f,E,a,n);var h=evaluatematrix(f);c>h&&(c=h,s=n),maskdata(f,E,n)}n=s}return maskdata(f,E,n),putformatinfo(f,E,a,n),f};function generateFrame(r,t){var e={numeric:MODE_NUMERIC,alphanumeric:MODE_ALPHANUMERIC,octet:MODE_OCTET},a={L:ECCLEVEL_L,M:ECCLEVEL_M,Q:ECCLEVEL_Q,H:ECCLEVEL_H},n=(t=t||{}).version||-1,u=a[(t.eccLevel||"L").toUpperCase()],o=t.mode?e[t.mode.toLowerCase()]:-1,i="mask"in t?t.mask:-1;if(o<0)o="string"==typeof r?r.match(NUMERIC_REGEXP)?MODE_NUMERIC:r.match(ALPHANUMERIC_OUT_REGEXP)?MODE_ALPHANUMERIC:MODE_OCTET:MODE_OCTET;else if(o!=MODE_NUMERIC&&o!=MODE_ALPHANUMERIC&&o!=MODE_OCTET)throw"invalid or unsupported mode";if(null===(r=validatedata(o,r)))throw"invalid data format";if(u<0||u>3)throw"invalid ECC level";if(n<0){for(n=1;n<=40&&!(r.length<=getmaxdatalen(n,o,u));++n);if(n>40)throw"too large data for the Qr format"}else if(n<1||n>40)throw"invalid Qr version! should be between 1 and 40";if(-1!=i&&(i<0||i>8))throw"invalid mask";return generate(r,n,o,u,i)}function buildCanvas(r,t){var e=[],a=t.background||"#fff",n=t.foreground||"#000",u=generateFrame(r,t),o=u.length,i=Math.floor(t.fit?t.fit/o:5),f=o*i;e.push({type:"rect",x:0,y:0,w:f,h:f,lineWidth:0,color:a});for(var E=0;E<o;++E)for(var s=0;s<o;++s)u[E][s]&&e.push({type:"rect",x:i*s,y:i*E,w:i,h:i,lineWidth:0,color:n});return{canvas:e,size:f}}function measure(r){var t=buildCanvas(r.qr,r);return r._canvas=t.canvas,r._width=r._height=r._minWidth=r._maxWidth=r._minHeight=r._maxHeight=t.size,r}module.exports={measure:measure};
//# sourceMappingURL=/sm/41ada171ff966633c3354262b8940d3ed16adac34cd1b5ff41fdebe2f64cdf48.map