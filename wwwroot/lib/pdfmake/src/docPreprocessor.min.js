/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/pdfmake@0.1.68/src/docPreprocessor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var isString=require("./helpers").isString,isNumber=require("./helpers").isNumber,isBoolean=require("./helpers").isBoolean,isArray=require("./helpers").isArray,isUndefined=require("./helpers").isUndefined,fontStringify=require("./helpers").fontStringify;function DocPreprocessor(){}DocPreprocessor.prototype.preprocessDocument=function(e){return this.parentNode=null,this.tocs=[],this.nodeReferences=[],this.preprocessNode(e)},DocPreprocessor.prototype.preprocessNode=function(e){if(isArray(e)?e={stack:e}:isString(e)?e={text:e}:isNumber(e)||isBoolean(e)?e={text:e.toString()}:null==e?e={text:""}:0===Object.keys(e).length?e={text:""}:"text"in e&&(void 0===e.text||null===e.text)&&(e.text=""),e.columns)return this.preprocessColumns(e);if(e.stack)return this.preprocessVerticalContainer(e);if(e.ul)return this.preprocessList(e);if(e.ol)return this.preprocessList(e);if(e.table)return this.preprocessTable(e);if(void 0!==e.text)return this.preprocessText(e);if(e.toc)return this.preprocessToc(e);if(e.image)return this.preprocessImage(e);if(e.svg)return this.preprocessSVG(e);if(e.canvas)return this.preprocessCanvas(e);if(e.qr)return this.preprocessQr(e);if(e.pageReference||e.textReference)return this.preprocessText(e);throw"Unrecognized document structure: "+JSON.stringify(e,fontStringify)},DocPreprocessor.prototype.preprocessColumns=function(e){for(var t=e.columns,r=0,o=t.length;r<o;r++)t[r]=this.preprocessNode(t[r]);return e},DocPreprocessor.prototype.preprocessVerticalContainer=function(e){for(var t=e.stack,r=0,o=t.length;r<o;r++)t[r]=this.preprocessNode(t[r]);return e},DocPreprocessor.prototype.preprocessList=function(e){for(var t=e.ul||e.ol,r=0,o=t.length;r<o;r++)t[r]=this.preprocessNode(t[r]);return e},DocPreprocessor.prototype.preprocessTable=function(e){var t,r,o,s;for(t=0,o=e.table.body[0].length;t<o;t++)for(r=0,s=e.table.body.length;r<s;r++){var i=e.table.body[r],n=i[t];void 0!==n&&(null===n&&(n=""),n._span||(i[t]=this.preprocessNode(n)))}return e},DocPreprocessor.prototype.preprocessText=function(e){if(e.tocItem){isArray(e.tocItem)||(e.tocItem=[e.tocItem]);for(var t=0,r=e.tocItem.length;t<r;t++){isString(e.tocItem[t])||(e.tocItem[t]="_default_");var o=e.tocItem[t];this.tocs[o]||(this.tocs[o]={toc:{_items:[],_pseudo:!0}}),e.id||(e.id="toc-"+o+"-"+this.tocs[o].toc._items.length);var s={_nodeRef:this._getNodeForNodeRef(e),_textNodeRef:e};this.tocs[o].toc._items.push(s)}}if(e.id)if(this.nodeReferences[e.id]){if(!this.nodeReferences[e.id]._pseudo)throw"Node id '"+e.id+"' already exists";this.nodeReferences[e.id]._nodeRef=this._getNodeForNodeRef(e),this.nodeReferences[e.id]._textNodeRef=e,this.nodeReferences[e.id]._pseudo=!1}else this.nodeReferences[e.id]={_nodeRef:this._getNodeForNodeRef(e),_textNodeRef:e};if(e.pageReference&&(this.nodeReferences[e.pageReference]||(this.nodeReferences[e.pageReference]={_nodeRef:{},_textNodeRef:{},_pseudo:!0}),e.text="00000",e.linkToDestination=e.pageReference,e._pageRef=this.nodeReferences[e.pageReference]),e.textReference&&(this.nodeReferences[e.textReference]||(this.nodeReferences[e.textReference]={_nodeRef:{},_pseudo:!0}),e.text="",e.linkToDestination=e.textReference,e._textRef=this.nodeReferences[e.textReference]),e.text&&e.text.text)e.text=[this.preprocessNode(e.text)];else if(isArray(e.text)){var i=!1;null===this.parentNode&&(this.parentNode=e,i=!0);for(t=0,r=e.text.length;t<r;t++)e.text[t]=this.preprocessNode(e.text[t]);i&&(this.parentNode=null)}return e},DocPreprocessor.prototype.preprocessToc=function(e){if(e.toc.id||(e.toc.id="_default_"),e.toc.title=e.toc.title?this.preprocessNode(e.toc.title):null,e.toc._items=[],this.tocs[e.toc.id]){if(!this.tocs[e.toc.id].toc._pseudo)throw"TOC '"+e.toc.id+"' already exists";e.toc._items=this.tocs[e.toc.id].toc._items}return this.tocs[e.toc.id]=e,e},DocPreprocessor.prototype.preprocessImage=function(e){return isUndefined(e.image.type)||isUndefined(e.image.data)||"Buffer"!==e.image.type||!isArray(e.image.data)||(e.image=Buffer.from(e.image.data)),e},DocPreprocessor.prototype.preprocessSVG=function(e){return e},DocPreprocessor.prototype.preprocessCanvas=function(e){return e},DocPreprocessor.prototype.preprocessQr=function(e){return e},DocPreprocessor.prototype._getNodeForNodeRef=function(e){return this.parentNode?this.parentNode:e},module.exports=DocPreprocessor;
//# sourceMappingURL=/sm/aa0fb320419c9ce5222bf1974d12b2ed190a6b295301010f12f011023c704256.map