/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jszip@3.5.0/lib/utils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var support=require("./support"),base64=require("./base64"),nodejsUtils=require("./nodejsUtils"),setImmediate=require("set-immediate-shim"),external=require("./external");function string2binary(r){return stringToArrayLike(r,support.uint8array?new Uint8Array(r.length):new Array(r.length))}function identity(r){return r}function stringToArrayLike(r,e){for(var t=0;t<r.length;++t)e[t]=255&r.charCodeAt(t);return e}exports.newBlob=function(r,e){exports.checkSupport("blob");try{return new Blob([r],{type:e})}catch(n){try{var t=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return t.append(r),t.getBlob(e)}catch(r){throw new Error("Bug : can't construct the Blob.")}}};var arrayToStringHelper={stringifyByChunk:function(r,e,t){var n=[],a=0,o=r.length;if(o<=t)return String.fromCharCode.apply(null,r);for(;a<o;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,r.slice(a,Math.min(a+t,o)))):n.push(String.fromCharCode.apply(null,r.subarray(a,Math.min(a+t,o)))),a+=t;return n.join("")},stringifyByChar:function(r){for(var e="",t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},applyCanBeUsed:{uint8array:function(){try{return support.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(r){return!1}}(),nodebuffer:function(){try{return support.nodebuffer&&1===String.fromCharCode.apply(null,nodejsUtils.allocBuffer(1)).length}catch(r){return!1}}()}};function arrayLikeToString(r){var e=65536,t=exports.getTypeOf(r),n=!0;if("uint8array"===t?n=arrayToStringHelper.applyCanBeUsed.uint8array:"nodebuffer"===t&&(n=arrayToStringHelper.applyCanBeUsed.nodebuffer),n)for(;e>1;)try{return arrayToStringHelper.stringifyByChunk(r,t,e)}catch(r){e=Math.floor(e/2)}return arrayToStringHelper.stringifyByChar(r)}function arrayLikeToArrayLike(r,e){for(var t=0;t<r.length;t++)e[t]=r[t];return e}exports.applyFromCharCode=arrayLikeToString;var transform={};transform.string={string:identity,array:function(r){return stringToArrayLike(r,new Array(r.length))},arraybuffer:function(r){return transform.string.uint8array(r).buffer},uint8array:function(r){return stringToArrayLike(r,new Uint8Array(r.length))},nodebuffer:function(r){return stringToArrayLike(r,nodejsUtils.allocBuffer(r.length))}},transform.array={string:arrayLikeToString,array:identity,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return nodejsUtils.newBufferFrom(r)}},transform.arraybuffer={string:function(r){return arrayLikeToString(new Uint8Array(r))},array:function(r){return arrayLikeToArrayLike(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:identity,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return nodejsUtils.newBufferFrom(new Uint8Array(r))}},transform.uint8array={string:arrayLikeToString,array:function(r){return arrayLikeToArrayLike(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:identity,nodebuffer:function(r){return nodejsUtils.newBufferFrom(r)}},transform.nodebuffer={string:arrayLikeToString,array:function(r){return arrayLikeToArrayLike(r,new Array(r.length))},arraybuffer:function(r){return transform.nodebuffer.uint8array(r).buffer},uint8array:function(r){return arrayLikeToArrayLike(r,new Uint8Array(r.length))},nodebuffer:identity},exports.transformTo=function(r,e){if(e||(e=""),!r)return e;exports.checkSupport(r);var t=exports.getTypeOf(e);return transform[t][r](e)},exports.getTypeOf=function(r){return"string"==typeof r?"string":"[object Array]"===Object.prototype.toString.call(r)?"array":support.nodebuffer&&nodejsUtils.isBuffer(r)?"nodebuffer":support.uint8array&&r instanceof Uint8Array?"uint8array":support.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},exports.checkSupport=function(r){if(!support[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},exports.MAX_VALUE_16BITS=65535,exports.MAX_VALUE_32BITS=-1,exports.pretty=function(r){var e,t,n="";for(t=0;t<(r||"").length;t++)n+="\\x"+((e=r.charCodeAt(t))<16?"0":"")+e.toString(16).toUpperCase();return n},exports.delay=function(r,e,t){setImmediate(function(){r.apply(t||null,e||[])})},exports.inherits=function(r,e){var t=function(){};t.prototype=e.prototype,r.prototype=new t},exports.extend=function(){var r,e,t={};for(r=0;r<arguments.length;r++)for(e in arguments[r])arguments[r].hasOwnProperty(e)&&void 0===t[e]&&(t[e]=arguments[r][e]);return t},exports.prepareContent=function(r,e,t,n,a){return external.Promise.resolve(e).then(function(r){return support.blob&&(r instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r)))&&"undefined"!=typeof FileReader?new external.Promise(function(e,t){var n=new FileReader;n.onload=function(r){e(r.target.result)},n.onerror=function(r){t(r.target.error)},n.readAsArrayBuffer(r)}):r}).then(function(e){var o=exports.getTypeOf(e);return o?("arraybuffer"===o?e=exports.transformTo("uint8array",e):"string"===o&&(a?e=base64.decode(e):t&&!0!==n&&(e=string2binary(e))),e):external.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})};
//# sourceMappingURL=/sm/275589ec29dfdadbea618389d4c1b5262f6a6a5e6b7d8090348dca0e53f4991e.map