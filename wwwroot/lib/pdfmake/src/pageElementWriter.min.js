/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/pdfmake@0.1.68/src/pageElementWriter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var isUndefined=require("./helpers").isUndefined,ElementWriter=require("./elementWriter");function PageElementWriter(e,t){this.transactionLevel=0,this.repeatables=[],this.tracker=t,this.writer=new ElementWriter(e,t)}function fitOnPage(e,t){var r=t(e);return r||(e.moveToNextPage(),r=t(e)),r}PageElementWriter.prototype.addLine=function(e,t,r){return fitOnPage(this,function(i){return i.writer.addLine(e,t,r)})},PageElementWriter.prototype.addImage=function(e,t){return fitOnPage(this,function(r){return r.writer.addImage(e,t)})},PageElementWriter.prototype.addSVG=function(e,t){return fitOnPage(this,function(r){return r.writer.addSVG(e,t)})},PageElementWriter.prototype.addQr=function(e,t){return fitOnPage(this,function(r){return r.writer.addQr(e,t)})},PageElementWriter.prototype.addVector=function(e,t,r,i){return this.writer.addVector(e,t,r,i)},PageElementWriter.prototype.beginClip=function(e,t){return this.writer.beginClip(e,t)},PageElementWriter.prototype.endClip=function(){return this.writer.endClip()},PageElementWriter.prototype.alignCanvas=function(e){this.writer.alignCanvas(e)},PageElementWriter.prototype.addFragment=function(e,t,r,i){this.writer.addFragment(e,t,r,i)||(this.moveToNextPage(),this.writer.addFragment(e,t,r,i))},PageElementWriter.prototype.moveToNextPage=function(e){var t=this.writer.context.moveToNextPage(e);this.repeatables.forEach(function(e){isUndefined(e.insertedOnPages[this.writer.context.page])?(e.insertedOnPages[this.writer.context.page]=!0,this.writer.addFragment(e,!0)):this.writer.context.moveDown(e.height)},this),this.writer.tracker.emit("pageChanged",{prevPage:t.prevPage,prevY:t.prevY,y:this.writer.context.y})},PageElementWriter.prototype.beginUnbreakableBlock=function(e,t){0==this.transactionLevel++&&(this.originalX=this.writer.context.x,this.writer.pushContext(e,t))},PageElementWriter.prototype.commitUnbreakableBlock=function(e,t){if(0==--this.transactionLevel){var r=this.writer.context;this.writer.popContext();var i=r.pages.length;if(i>0){var n=r.pages[0];if(n.xOffset=e,n.yOffset=t,i>1)if(void 0!==e||void 0!==t)n.height=r.getCurrentPage().pageSize.height-r.pageMargins.top-r.pageMargins.bottom;else{n.height=this.writer.context.getCurrentPage().pageSize.height-this.writer.context.pageMargins.top-this.writer.context.pageMargins.bottom;for(var a=0,o=this.repeatables.length;a<o;a++)n.height-=this.repeatables[a].height}else n.height=r.y;void 0!==e||void 0!==t?this.writer.addFragment(n,!0,!0,!0):this.addFragment(n)}}},PageElementWriter.prototype.currentBlockToRepeatable=function(){var e=this.writer.context,t={items:[]};return e.pages[0].items.forEach(function(e){t.items.push(e)}),t.xOffset=this.originalX,t.height=e.y,t.insertedOnPages=[],t},PageElementWriter.prototype.pushToRepeatables=function(e){this.repeatables.push(e)},PageElementWriter.prototype.popFromRepeatables=function(){this.repeatables.pop()},PageElementWriter.prototype.context=function(){return this.writer.context},module.exports=PageElementWriter;
//# sourceMappingURL=/sm/b8994e98b31ddec39aab7f8d785450fda165a4aa7e3b42ea59c424182dc515ce.map